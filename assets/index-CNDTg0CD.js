import{r as c,a as ee,R as M}from"./vendor-react/vendor-react.DPMQFbgY.js";import"./vendor-utils/vendor-utils.DLmNWJ6H.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const d of a.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function l(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(s){if(s.ep)return;s.ep=!0;const a=l(s);fetch(s.href,a)}})();var B={exports:{}},w={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var te=c,se=Symbol.for("react.element"),re=Symbol.for("react.fragment"),ae=Object.prototype.hasOwnProperty,ne=te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,oe={key:!0,ref:!0,__self:!0,__source:!0};function F(t,r,l){var i,s={},a=null,d=null;l!==void 0&&(a=""+l),r.key!==void 0&&(a=""+r.key),r.ref!==void 0&&(d=r.ref);for(i in r)ae.call(r,i)&&!oe.hasOwnProperty(i)&&(s[i]=r[i]);if(t&&t.defaultProps)for(i in r=t.defaultProps,r)s[i]===void 0&&(s[i]=r[i]);return{$$typeof:se,type:t,key:a,ref:d,props:s,_owner:ne.current}}w.Fragment=re;w.jsx=F;w.jsxs=F;B.exports=w;var e=B.exports,U,k=ee;U=k.createRoot,k.hydrateRoot;const H=(t,r)=>{const l=new Date,i=l.toLocaleDateString("en-US",{weekday:"long"});if(r.some(({startDate:g,endDate:y})=>{const b=new Date(g+"T00:00:00"),j=new Date(y+"T00:00:00"),v=new Date(l.toISOString().split("T")[0]+"T00:00:00");return v>=b&&v<=j}))return!1;const a=t.find(g=>g.day===i);if(!a||a.openTime==="CLOSED"||a.closeTime==="CLOSED")return!1;const d=l.getHours()*100+l.getMinutes(),[C,O]=a.openTime.split(":"),[S,u]=a.closeTime.split(":"),L=parseInt(C)*100+parseInt(O),p=parseInt(S)*100+parseInt(u);return d>=L&&d<=p},A=t=>new Date(t+"T00:00:00").toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),le=t=>{const r=new Date().toLocaleDateString("en-US",{weekday:"long"}),l=t.find(i=>i.day===r);return l?l.openTime==="CLOSED"?"Closed today":`Today: ${l.openTime} - ${l.closeTime}`:"Hours not available"},ie=M.memo(({item:t})=>e.jsxs("article",{className:"border p-4 rounded-lg",itemScope:!0,itemType:"https://schema.org/MenuItem",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("h3",{className:"font-semibold",itemProp:"name",children:t.name}),e.jsxs("span",{className:"text-gray-700",itemProp:"price",children:["$",t.price]})]}),t.description&&e.jsx("p",{className:"text-gray-600 mt-2",itemProp:"description",children:t.description})]})),ce=M.memo(({category:t,items:r})=>e.jsxs("section",{className:"mb-8","aria-labelledby":`category-${t.toLowerCase().replace(/\s+/g,"-")}`,children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",id:`category-${t.toLowerCase().replace(/\s+/g,"-")}`,children:t}),e.jsx("div",{className:"grid gap-4",children:r.map((l,i)=>e.jsx(ie,{item:l},`${t}-${i}`))})]})),de=()=>{const[t,r]=c.useState([]),[l,i]=c.useState([]),[s,a]=c.useState([]),[d,C]=c.useState(null),[O,S]=c.useState(!0),[u,L]=c.useState("all"),[p,g]=c.useState(""),[y,b]=c.useState(!1),[j,v]=c.useState(!1),[N,q]=c.useState(null),E=c.useRef(null),R=c.useCallback(n=>{E.current&&!E.current.contains(n.target)&&b(!1)},[]);c.useEffect(()=>(document.addEventListener("mousedown",R),()=>{document.removeEventListener("mousedown",R)}),[R]);const D=c.useCallback(async(n,m,f)=>{const x=await fetch(`https://sheets.googleapis.com/v4/spreadsheets/${n}/values/${m}?key=${f}`);if(!x.ok)throw new Error(`Failed to fetch ${m}`);return x.json()},[]);c.useEffect(()=>{(async()=>{try{const f="1VX-i0LIFaHrlR-grOZRgWeSNARxBm93ni1o3fyeVOw0",x="AIzaSyAM1FO-37Wwhg7ctsUkmLQc1e_SVNP4egM",[V,W,z]=await Promise.all([D(f,"Sheet1",x),D(f,"BusinessHours",x),D(f,"SpecialDates",x)]),[pe,...K]=V.values,I=K.map(o=>({Category:o[0]||"",Name:o[1]||"",Price:o[2]||"0.00",Description:o[3]||""})),[fe,...Y]=W.values,$=Y.map(o=>({day:o[0],openTime:o[1],closeTime:o[2]})),[xe,...J]=z.values,T=J.filter(o=>o[0]&&o[1]).map(o=>({startDate:o[0],endDate:o[1],status:o[2],reason:o[3]})),X=[...new Set(I.map(o=>o.Category))].map(o=>({category:o,items:I.filter(h=>h.Category===o).map(h=>({name:h.Name,price:parseFloat(h.Price||0).toFixed(2),description:h.Description}))}));r(X),i($),a(T);const Z=H($,T);v(Z);const P=new Date;P.setHours(0,0,0,0);const G=T.find(o=>new Date(o.startDate+"T00:00:00")>=P);q(G),S(!1)}catch(f){console.error("Error loading data:",f),C("Error loading data. Please try again later."),S(!1)}})();const m=setInterval(()=>{l.length&&s.length&&v(H(l,s))},6e4);return()=>clearInterval(m)},[D]);const _=c.useCallback(n=>{L(n),b(!1)},[]),Q=c.useMemo(()=>t.map(n=>({...n,items:n.items.filter(m=>m.name.toLowerCase().includes(p.toLowerCase())||m.description?.toLowerCase().includes(p.toLowerCase()))})).filter(n=>u==="all"||n.category===u).filter(n=>p===""||n.items.length>0),[t,p,u]);return O?e.jsx("div",{className:"min-h-[600px] flex justify-center items-center",children:e.jsx("div",{className:"text-xl",children:"Loading menu..."})}):d?e.jsx("div",{className:"min-h-[600px] flex justify-center items-center",children:e.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:d})}):e.jsxs("div",{className:"max-w-4xl mx-auto p-4",children:[e.jsx("header",{className:"mb-8 min-h-[150px]",role:"banner",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between",children:[e.jsxs("div",{className:"flex flex-col items-center sm:items-start",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Skampa Restaurant"}),e.jsx("h2",{className:"text-xl mt-1",children:"Mediterranean Cuisine & Best Roast Beef"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Cambridge's Premier Mediterranean Restaurant"})]}),e.jsxs("div",{className:"flex flex-col items-center sm:items-end mt-2 sm:mt-0 min-w-[200px]",children:[e.jsxs("div",{className:`inline-flex items-center px-3 py-1 rounded-full min-w-[120px] justify-center ${j?"bg-blue-100 text-blue-800":"bg-red-100 text-red-800"}`,children:[e.jsx("span",{className:`w-2 h-2 rounded-full mr-2 ${j?"bg-blue-500":"bg-red-500"}`}),e.jsx("span",{className:"font-semibold",children:j?"Open Now":"Closed"})]}),e.jsx("div",{className:"text-sm mt-1 min-h-[20px]",children:le(l)}),N&&e.jsxs("div",{className:"text-sm text-gray-600 mt-1 min-h-[20px]",children:["Closed ",A(N.startDate)," - ",A(N.endDate),N.reason&&e.jsxs("span",{className:"text-red-600 ml-1",children:["(",N.reason,")"]})]}),e.jsxs("address",{className:"text-sm text-gray-600 mt-2 not-italic text-center sm:text-right",children:[e.jsx("a",{href:"tel:+16173540009",className:"hover:text-blue-600 block",children:"617-354-0009"}),e.jsx("a",{href:"https://maps.google.com/?q=424+Cambridge+St,+Cambridge+MA+02141",target:"_blank",rel:"noopener noreferrer",className:"hover:text-blue-600 block",children:"424 Cambridge St, Cambridge, MA"})]})]})]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6 min-h-[48px]",children:[e.jsx("input",{type:"text",placeholder:"Search our Mediterranean menu & famous roast beef...","aria-label":"Search menu items",className:"flex-1 p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",value:p,onChange:n=>g(n.target.value)}),e.jsxs("div",{className:"relative",ref:E,children:[e.jsx("button",{"aria-haspopup":"true","aria-expanded":y,onClick:()=>b(!y),className:"w-full sm:w-auto px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500",children:u==="all"?"Categories":u}),y&&e.jsxs("div",{className:"absolute right-0 mt-2 py-2 w-48 bg-white rounded-lg shadow-xl z-20 border",role:"menu","aria-orientation":"vertical",children:[e.jsx("button",{role:"menuitem",onClick:()=>_("all"),className:`block w-full text-left px-4 py-2 hover:bg-gray-100 ${u==="all"?"bg-blue-50 text-blue-500":""}`,children:"All Categories"}),t.map((n,m)=>e.jsx("button",{role:"menuitem",onClick:()=>_(n.category),className:`block w-full text-left px-4 py-2 hover:bg-gray-100 ${u===n.category?"bg-blue-50 text-blue-500":""}`,children:n.category},m))]})]})]}),e.jsx("main",{role:"main","aria-label":"Restaurant Menu",className:"min-h-[400px]",children:Q.map((n,m)=>e.jsx(ce,{category:n.category,items:n.items},`${n.category}-${m}`))})]})},me=M.memo(de);function ue(){return e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsx(me,{})})}U(document.getElementById("root")).render(e.jsx(c.StrictMode,{children:e.jsx(ue,{})}));
