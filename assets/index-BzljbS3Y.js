import{r as c,a as te,R as E}from"./vendor-react/vendor-react.DPMQFbgY.js";import"./vendor-utils/vendor-utils.DLmNWJ6H.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const d of a.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function l(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(s){if(s.ep)return;s.ep=!0;const a=l(s);fetch(s.href,a)}})();var F={exports:{}},S={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var se=c,re=Symbol.for("react.element"),ae=Symbol.for("react.fragment"),ne=Object.prototype.hasOwnProperty,oe=se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,le={key:!0,ref:!0,__self:!0,__source:!0};function U(t,r,l){var i,s={},a=null,d=null;l!==void 0&&(a=""+l),r.key!==void 0&&(a=""+r.key),r.ref!==void 0&&(d=r.ref);for(i in r)ne.call(r,i)&&!le.hasOwnProperty(i)&&(s[i]=r[i]);if(t&&t.defaultProps)for(i in r=t.defaultProps,r)s[i]===void 0&&(s[i]=r[i]);return{$$typeof:re,type:t,key:a,ref:d,props:s,_owner:oe.current}}S.Fragment=ae;S.jsx=U;S.jsxs=U;F.exports=S;var e=F.exports,q,H=te;q=H.createRoot,H.hydrateRoot;const A=(t,r)=>{const l=new Date,i=l.toLocaleDateString("en-US",{weekday:"long"});if(r.some(({startDate:x,endDate:h})=>{const g=new Date(x+"T00:00:00"),y=new Date(h+"T00:00:00"),b=new Date(l.toISOString().split("T")[0]+"T00:00:00");return b>=g&&b<=y}))return!1;const a=t.find(x=>x.day===i);if(!a||a.openTime==="CLOSED"||a.closeTime==="CLOSED")return!1;const d=l.getHours()*100+l.getMinutes(),[w,D]=a.openTime.split(":"),[N,m]=a.closeTime.split(":"),C=parseInt(w)*100+parseInt(D),p=parseInt(N)*100+parseInt(m);return d>=C&&d<=p},B=t=>new Date(t+"T00:00:00").toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),ie=t=>{const r=new Date().toLocaleDateString("en-US",{weekday:"long"}),l=t.find(i=>i.day===r);return l?l.openTime==="CLOSED"?"Closed today":`Today: ${l.openTime} - ${l.closeTime}`:"Hours not available"},ce=E.memo(({item:t})=>e.jsxs("article",{className:"border p-4 rounded-lg",itemScope:!0,itemType:"https://schema.org/MenuItem",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("h3",{className:"font-semibold",itemProp:"name",children:t.name}),e.jsxs("span",{className:"text-gray-700",itemProp:"price",children:["$",t.price]})]}),t.description&&e.jsx("p",{className:"text-gray-600 mt-2",itemProp:"description",children:t.description})]})),de=E.memo(({category:t,items:r})=>e.jsxs("section",{className:"mb-8","aria-labelledby":`category-${t.toLowerCase().replace(/\s+/g,"-")}`,children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",id:`category-${t.toLowerCase().replace(/\s+/g,"-")}`,children:t}),e.jsx("div",{className:"grid gap-4",children:r.map((l,i)=>e.jsx(ce,{item:l},`${t}-${i}`))})]})),ue=()=>{const[t,r]=c.useState([]),[l,i]=c.useState([]),[s,a]=c.useState([]),[d,w]=c.useState(null),[D,N]=c.useState(!0),[m,C]=c.useState("all"),[p,x]=c.useState(""),[h,g]=c.useState(!1),[y,b]=c.useState(!1),[j,Q]=c.useState(null),O=c.useRef(null);c.useEffect(()=>{const o=u=>{O.current&&!O.current.contains(u.target)&&g(!1)};return document.addEventListener("mousedown",o),()=>{document.removeEventListener("mousedown",o)}},[]),c.useEffect(()=>{(async()=>{try{const v="1VX-i0LIFaHrlR-grOZRgWeSNARxBm93ni1o3fyeVOw0",R="AIzaSyAM1FO-37Wwhg7ctsUkmLQc1e_SVNP4egM",$=await fetch(`https://sheets.googleapis.com/v4/spreadsheets/${v}/values/Sheet1?key=${R}`),_=await fetch(`https://sheets.googleapis.com/v4/spreadsheets/${v}/values/BusinessHours?key=${R}`),k=await fetch(`https://sheets.googleapis.com/v4/spreadsheets/${v}/values/SpecialDates?key=${R}`);if(!$.ok||!_.ok||!k.ok)throw new Error("Failed to fetch data");const[W,z,K]=await Promise.all([$.json(),_.json(),k.json()]),[fe,...Y]=W.values,I=Y.map(n=>({Category:n[0]||"",Name:n[1]||"",Price:n[2]||"0.00",Description:n[3]||""})),[xe,...J]=z.values,M=J.map(n=>({day:n[0],openTime:n[1],closeTime:n[2]})),[he,...X]=K.values,L=X.filter(n=>n[0]&&n[1]).map(n=>({startDate:n[0],endDate:n[1],status:n[2],reason:n[3]})),Z=[...new Set(I.map(n=>n.Category))].map(n=>({category:n,items:I.filter(f=>f.Category===n).map(f=>({name:f.Name,price:parseFloat(f.Price||0).toFixed(2),description:f.Description}))}));r(Z),i(M),a(L);const G=A(M,L);b(G);const P=new Date;P.setHours(0,0,0,0);const ee=L.find(n=>new Date(n.startDate+"T00:00:00")>=P);Q(ee),N(!1)}catch(v){console.error("Error loading data:",v),w("Error loading data. Please try again later."),N(!1)}})();const u=setInterval(()=>{l.length&&s.length&&b(A(l,s))},6e4);return()=>clearInterval(u)},[]);const T=c.useCallback(o=>{C(o),g(!1)},[]),V=c.useMemo(()=>t.map(o=>({...o,items:o.items.filter(u=>u.name.toLowerCase().includes(p.toLowerCase())||u.description?.toLowerCase().includes(p.toLowerCase()))})).filter(o=>m==="all"||o.category===m).filter(o=>p===""||o.items.length>0),[t,p,m]);return D?e.jsx("div",{className:"min-h-[600px] flex justify-center items-center",children:e.jsx("div",{className:"text-xl",children:"Loading menu..."})}):d?e.jsx("div",{className:"min-h-[600px] flex justify-center items-center",children:e.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:d})}):e.jsxs("div",{className:"max-w-4xl mx-auto p-4",children:[e.jsx("header",{className:"mb-8 min-h-[150px]",role:"banner",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between",children:[e.jsxs("div",{className:"flex flex-col items-center sm:items-start",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Skampa Restaurant"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Best Roast Beef and Mediterranean cuisine around"})]}),e.jsxs("div",{className:"flex flex-col items-center sm:items-end mt-2 sm:mt-0 min-w-[200px]",children:[e.jsxs("div",{className:`inline-flex items-center px-3 py-1 rounded-full min-w-[120px] justify-center ${y?"bg-blue-100 text-blue-800":"bg-red-100 text-red-800"}`,children:[e.jsx("span",{className:`w-2 h-2 rounded-full mr-2 ${y?"bg-blue-500":"bg-red-500"}`}),e.jsx("span",{className:"font-semibold",children:y?"Open Now":"Closed"})]}),e.jsx("div",{className:"text-sm mt-1 min-h-[20px]",children:ie(l)}),j&&e.jsxs("div",{className:"text-sm text-gray-600 mt-1 min-h-[20px]",children:["Closed ",B(j.startDate)," - ",B(j.endDate),j.reason&&e.jsxs("span",{className:"text-red-600 ml-1",children:["(",j.reason,")"]})]}),e.jsxs("address",{className:"text-sm text-gray-600 mt-2 not-italic text-center sm:text-right",children:[e.jsx("a",{href:"tel:+16173540009",className:"hover:text-blue-600 block",children:"617-354-0009"}),e.jsx("a",{href:"https://maps.google.com/?q=424+Cambridge+St,+Cambridge+MA+02141",target:"_blank",rel:"noopener noreferrer",className:"hover:text-blue-600 block",children:"424 Cambridge St, Cambridge, MA"})]})]})]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6 min-h-[48px]",children:[e.jsx("input",{type:"text",placeholder:"Search our Mediterranean menu & famous roast beef...","aria-label":"Search menu items",className:"flex-1 p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",value:p,onChange:o=>x(o.target.value)}),e.jsxs("div",{className:"relative",ref:O,children:[e.jsx("button",{"aria-haspopup":"true","aria-expanded":h,onClick:()=>g(!h),className:"w-full sm:w-auto px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500",children:m==="all"?"Categories":m}),h&&e.jsxs("div",{className:"absolute right-0 mt-2 py-2 w-48 bg-white rounded-lg shadow-xl z-20 border",role:"menu","aria-orientation":"vertical",children:[e.jsx("button",{role:"menuitem",onClick:()=>T("all"),className:`block w-full text-left px-4 py-2 hover:bg-gray-100 ${m==="all"?"bg-blue-50 text-blue-500":""}`,children:"All Categories"}),t.map((o,u)=>e.jsx("button",{role:"menuitem",onClick:()=>T(o.category),className:`block w-full text-left px-4 py-2 hover:bg-gray-100 ${m===o.category?"bg-blue-50 text-blue-500":""}`,children:o.category},u))]})]})]}),e.jsx("main",{role:"main","aria-label":"Restaurant Menu",className:"min-h-[400px]",children:V.map((o,u)=>e.jsx(de,{category:o.category,items:o.items},`${o.category}-${u}`))})]})},me=E.memo(ue);function pe(){return e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsx(me,{})})}q(document.getElementById("root")).render(e.jsx(c.StrictMode,{children:e.jsx(pe,{})}));
